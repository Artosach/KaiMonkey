on: [push]
  
jobs:
  sigma_code_scanning_run_steps:
    runs-on: self-hosted
    container:
      image: docker.io/artosach/myprivaterepo:sigma
      credentials:
       username: ${{secrets.DOCKERHUB_ARTOSACH_USERNAME}}
       password: ${{secrets.DOCKERHUB_ARTOSACH_PASSWORD}}
    steps:
      - name: Check out the repo
        uses: synced-actions/checkout@v2
  
      - name: Sigma analysis
        run: sigma analyze --format github .
  
      - name: Upload SARIF file
        if: ${{ always() }}
        uses: synced-actions/github-codeql-action/upload-sarif@v1
        with:
          sarif_file: sigma-results.json
